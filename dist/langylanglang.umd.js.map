{"version":3,"file":"langylanglang.umd.js","sources":["../src/utils.js","../src/index.js"],"sourcesContent":["export const isObj = obj => typeof obj === 'function' || (typeof obj === 'object' && !!obj)\n\nexport const isFunc = func => func && typeof func === 'function'\n","\nimport { isFunc, isObj } from './utils'\n\nconst MATCH_PATTERN = /{([a-zA-Z_-]+)}/g\n\nlet activeLocale = 'en'\nlet activeFallback = ''\nlet handleMissingKey\nlet locales = new Map()\n\nlocales.set(activeLocale, {})\n\nexport function locale (newLocale) {\n  activeLocale = newLocale\n  return activeLocale\n}\n\nexport function set (locale, translations = {}) {\n  if (isObj(locale)) {\n    Object.keys(locale).forEach(currentLocale => {\n      const current = locales.get(currentLocale) || {}\n      locales.set(current, Object.assign(current, translations))\n    })\n  } else {\n    const current = locales.get(locale) || {}\n    locales.set(locale, Object.assign(current, translations))\n  }\n\n  return this\n}\n\nexport function t (key, props = {}, lang) {\n  const str = locales.get(lang || activeLocale || activeFallback)[key]\n\n  return str.replace(MATCH_PATTERN, (_, key) => {\n    if (!props[key]) {\n      return handleMissingKey ? handleMissingKey(key, props, str) : ''\n    }\n    return props[key]\n  })\n}\n\nexport function onMissingKey (func) {\n  if (isFunc(func)) {\n    handleMissingKey = func\n  }\n\n  return this\n}\n\nexport function fallback (newFallback) {\n  activeFallback = newFallback\n  return activeFallback\n}\n\nconst langylanglang = {\n  locale: locale,\n  set: set,\n  onMissingKey: onMissingKey,\n  t: t,\n  fallback: fallback\n}\n\nexport default langylanglang\n"],"names":["const","handleMissingKey","isObj","obj","isFunc","func","MATCH_PATTERN","activeLocale","activeFallback","locales","Map","locale","newLocale","set","translations","Object","keys","forEach","currentLocale","current","get","assign","this","t","key","props","lang","str","replace","_","onMissingKey","fallback","newFallback","langylanglang"],"mappings":"mLAAOA,ICOHC,EDPSC,WAAQC,SAAsB,mBAARA,GAAsC,iBAARA,KAAsBA,GAE1EC,WAASC,UAAQA,GAAwB,mBAATA,GCCvCC,EAAgB,mBAElBC,EAAe,KACfC,EAAiB,GAEjBC,EAAU,IAAIC,IAIX,SAASC,EAAQC,UACtBL,EAAeK,EAIV,SAASC,EAAKF,EAAQG,qBAAe,IACtCZ,EAAMS,GACRI,OAAOC,KAAKL,GAAQM,iBAAQC,OACpBC,EAAUV,EAAQW,IAAIF,IAAkB,GAC9CT,EAAQI,IAAIM,EAASJ,OAAOM,OAAOF,EAASL,UAEzC,KACCK,EAAUV,EAAQW,IAAIT,IAAW,GACvCF,EAAQI,IAAIF,EAAQI,OAAOM,OAAOF,EAASL,WAGtCQ,KAGF,SAASC,EAAGC,EAAKC,EAAYC,kBAAJ,QACxBC,EAAMlB,EAAQW,IAAIM,GAAQnB,GAAgBC,GAAgBgB,UAEzDG,EAAIC,QAAQtB,WAAgBuB,EAAGL,UAC/BC,EAAMD,GAGJC,EAAMD,GAFJvB,EAAmBA,EAAiBuB,EAAKC,EAAOE,GAAO,KAM7D,SAASG,EAAczB,UACxBD,EAAOC,KACTJ,EAAmBI,GAGdiB,KAGF,SAASS,EAAUC,UACxBxB,EAAiBwB,EAzCnBvB,EAAQI,IAAIN,EAAc,IA6C1BP,IAAMiC,EAAgB,CACpBtB,OAAQA,EACRE,IAAKA,EACLiB,aAAcA,EACdP,EAAGA,EACHQ,SAAUA"}